import{_ as s,c as n,o as a,e as l}from"./app.bd88c791.js";const d=JSON.parse('{"title":"gitlab-CI 持续集成以及runner的配置简版","description":"","frontmatter":{"title":"gitlab-CI 持续集成以及runner的配置简版","tags":["gitlab","runner"],"categories":["other"],"date":"2018-12-12T00:00:00.000Z","author":"recoluan"},"headers":[{"level":2,"title":"Gitlab CI","slug":"gitlab-ci","link":"#gitlab-ci","children":[]},{"level":2,"title":"Gitlab-Runner","slug":"gitlab-runner","link":"#gitlab-runner","children":[]},{"level":2,"title":"配置 gitlab-runner.yml","slug":"配置-gitlab-runner-yml","link":"#配置-gitlab-runner-yml","children":[]},{"level":2,"title":"其他","slug":"其他","link":"#其他","children":[]}],"relativePath":"posts/2018/121201.md"}'),p={name:"posts/2018/121201.md"},o=l(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在我们完成项目开发后，提交到 git，当监听提交后，自动进行编译，并进行项目的部署，是不是一想就很爽，所以下面引入我们的主角 —— gitlab-CI，<a href="https://fennay.github.io/gitlab-ci-cn/" target="_blank" rel="noreferrer">中文文档</a>。</p></div><h2 id="gitlab-ci" tabindex="-1">Gitlab CI <a class="header-anchor" href="#gitlab-ci" aria-hidden="true">#</a></h2><p>Gitlab-CI 是 GitLab Continuous Integration（Gitlab 持续集成）的简称。 从 Gitlab 的 8.0 版本开始，gitlab 就全面集成了 Gitlab-CI,并且对所有项目默认开启。 只要在项目仓库的根目录添加.gitlab-ci.yml 文件，并且配置了 Runner（运行器），那么每一次合并请求（MR）或者 push 都会触发 CI pipeline。</p><h2 id="gitlab-runner" tabindex="-1">Gitlab-Runner <a class="header-anchor" href="#gitlab-runner" aria-hidden="true">#</a></h2><h4 id="安装-gitlab-ci-multi-runner-linux" tabindex="-1">安装 gitlab-ci-multi-runner（linux） <a class="header-anchor" href="#安装-gitlab-ci-multi-runner-linux" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 添加yum源</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.rpm.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gitlab-ci-multi-runner</span></span>
<span class="line"></span></code></pre></div><h4 id="使用-gitlab-ci-multi-runner-注册-specific-runners" tabindex="-1">使用 gitlab-ci-multi-runner 注册 Specific Runners <a class="header-anchor" href="#使用-gitlab-ci-multi-runner-注册-specific-runners" aria-hidden="true">#</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/4660406-23e31a052864a7a0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="runners.jpg"></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gitlab-ci-multi-runner</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">register</span></span>
<span class="line"><span style="color:#FFCB6B;">Running</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">system-mode.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gitlab-ci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">coordinator</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">URL</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">e.g.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://gitlab.com/</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="color:#FFCB6B;">你的URL</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gitlab-ci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">token</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">this</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">runner:</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="color:#FFCB6B;">你的Token</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gitlab-ci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">description</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">this</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">runner:</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="color:#FFCB6B;">你对该runner的描述</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gitlab-ci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tags</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">this</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">runner</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">comma</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">separated</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="color:#FFCB6B;">该runner的标签</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Whether</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">untagged</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">builds</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[true</span><span style="color:#A6ACCD;">/</span><span style="color:#89DDFF;">false]</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#89DDFF;">[false]</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="color:#FFCB6B;">是否运行没有标记的项目（后期可以改）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Whether</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lock</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Runner</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">current</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[true</span><span style="color:#A6ACCD;">/</span><span style="color:#89DDFF;">false]</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#89DDFF;">[false]</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="color:#FFCB6B;">是否锁定只运行当前项目（后期可以改）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Registering</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">runner...</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">succeeded</span><span style="color:#A6ACCD;">                     </span><span style="color:#C3E88D;">runner=9e48baqx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">executor:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">parallels,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker+machine,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ssh,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">virtualbox,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ssh+machine,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubernetes,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ssh,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shell:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="color:#FFCB6B;">选择runner的类型（根据你的需求选择，我选择的shell，我的项目是node项目）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Runner</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registered</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successfully.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Feel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">free</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">it,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">but</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">it</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s running already the config should be automatically reloaded!</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><ol><li>首先你的项目中的 <code>getlab-runner.yml</code> 文件中的命令需要的环境，你的 runner 所在的服务器是必须要搭好的，必须你需要执行 <code>npm install</code> 和 <code>npm run build</code> ，那你的服务器必须要有 node 环境；</li><li>runner 的类型比较重要，你必须要清楚你需要一个什么类型的 runner。比如，开始我是需要一个能够运行 node 项目的 runner，但是网上的很多教程统一都是都选择 docker，这个时候你电脑上必须要安装了 docker 才可以，因为这相当于在 docker 里面又安装了一个 docker（docker in docker），所以对于我的需求来说，我选择 shell 就可以了；</li><li>通过 Gitlab 中某个项目的 <code>Settings</code> 下的 <code>CI/CD Pipelines</code> 按钮进入的页面中得到的 URL 和 Token 所注册的 runner 只服务于本项目，当你在其他项目的当前页面时，可以选择让这个 runner 为当前项目开启服务。</li></ol></div><h2 id="配置-gitlab-runner-yml" tabindex="-1">配置 gitlab-runner.yml <a class="header-anchor" href="#配置-gitlab-runner-yml" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mage:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:9.11.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pages:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">cache:</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#FFCB6B;">paths:</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node_modules/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">script:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/ftp/http/files/scfAdminDoc</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./scfAdminDoc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/ftp/http/files/</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">artifacts:</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#FFCB6B;">paths:</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">public</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">only:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">master</span></span>
<span class="line"></span></code></pre></div><p>具体配置见<a href="https://fennay.github.io/gitlab-ci-cn/gitlab-ci-yaml.html" target="_blank" rel="noreferrer">文档</a></p><h2 id="其他" tabindex="-1">其他 <a class="header-anchor" href="#其他" aria-hidden="true">#</a></h2><h4 id="代码推送到-gitlab-上之后-一直是-pending-状态-要等很久才-pick-到一个-runner-来执行" tabindex="-1">代码推送到 gitlab 上之后，一直是 pending 状态，要等很久才 pick 到一个 runner 来执行 <a class="header-anchor" href="#代码推送到-gitlab-上之后-一直是-pending-状态-要等很久才-pick-到一个-runner-来执行" aria-hidden="true">#</a></h4><p>这个现象一般发生在本机注册了多个 runner，之前的都删除了，只留下一个，但是当我们在 gitlab 管理平台移除了某个 runner 的时候，并没有完全删除记录，当执行的 <code>gitlab-ci-multi-runner list</code> 的时候你会发现它仍然还在，如果需要彻底删除它，还应该这样做：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/gitlab-runner</span></span>
<span class="line"><span style="color:#FFCB6B;">ls</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 你会看到config.toml文件，打开它并删除已有的那些runner记录</span></span>
<span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config.toml</span></span>
<span class="line"></span></code></pre></div><h4 id="配置-node-环境" tabindex="-1">配置 node 环境 <a class="header-anchor" href="#配置-node-环境" aria-hidden="true">#</a></h4><ol><li><p>下载 node-v9.11.1-linux-x64.tar.xz 文件</p></li><li><p>例如放在 <code>/home</code> 文件夹</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入所在目录，解压</span></span>
<span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-xvf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node-v9.</span><span style="color:#F78C6C;">11.1</span><span style="color:#C3E88D;">-linux-x64.tar.xz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重命名文件夹</span></span>
<span class="line"><span style="color:#FFCB6B;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node-v9.</span><span style="color:#F78C6C;">11.1</span><span style="color:#C3E88D;">-linux-x64</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nodejs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 建立软链接，配置全局环境变量（源路径和目标路径为相对路径）</span></span>
<span class="line"><span style="color:#FFCB6B;">ln</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/nodejs/bin/npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/</span></span>
<span class="line"><span style="color:#FFCB6B;">ln</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/nodejs/bin/node</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 检查是否配置成功</span></span>
<span class="line"><span style="color:#FFCB6B;">node</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"></span></code></pre></div></li></ol><h4 id="scp-上上传" tabindex="-1">scp 上上传 <a class="header-anchor" href="#scp-上上传" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 普通</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./public/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@192.168.0.226:/data/ftp/http/files/</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">源路径/源文件</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">root</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">@服务器IP:目标路径</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 免密码</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sshpass</span></span>
<span class="line"><span style="color:#FFCB6B;">sshpass</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">111111</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./public/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@192.168.0.226:/data/ftp/http/files/</span></span>
<span class="line"><span style="color:#FFCB6B;">sshpass</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">密码</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">源路径/源文件</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">root</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">@服务器IP:目标路径</span></span>
<span class="line"></span></code></pre></div><p>如果是下载，调换顺序</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@192.168.0.226:/data/ftp/http/files/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./public/</span><span style="color:#A6ACCD;">*</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">root</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">@服务器IP:目标路径</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">源路径/源文件</span></span>
<span class="line"></span></code></pre></div><p>转自博客：<a href="http://recoluan.gitlab.io" target="_blank" rel="noreferrer"><strong>午后南杂</strong></a></p>`,24),e=[o];function t(c,r,C,i,y,D){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{d as __pageData,u as default};
