import{_ as s,c as a,o as n,e as l}from"./app.bd88c791.js";const d=JSON.parse('{"title":"GitLab Pages/Vuepress生成项目文档和博客","description":"","frontmatter":{"title":"GitLab Pages/Vuepress生成项目文档和博客","tags":["vuepress"],"categories":["other"],"date":"2018-09-09T00:00:00.000Z","author":"recoluan"},"headers":[{"level":2,"title":"GitLab Pages 原理","slug":"gitlab-pages-原理","link":"#gitlab-pages-原理","children":[]},{"level":2,"title":"Vuepress","slug":"vuepress","link":"#vuepress","children":[]},{"level":2,"title":"遇到的坑","slug":"遇到的坑","link":"#遇到的坑","children":[]},{"level":2,"title":"修改主题","slug":"修改主题","link":"#修改主题","children":[]}],"relativePath":"posts/2018/090901.md"}'),p={name:"posts/2018/090901.md"},e=l(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>最近在给公司架构一个新的项目，要求同时写出一个完整的文档，由于正好在浏览 vue 的 GitHub 浏览相关项目时，看到了 <code>Vuepress</code>，所以尝试了一把，所以把开发中的积累写下来。</p></div><h2 id="gitlab-pages-原理" tabindex="-1">GitLab Pages 原理 <a class="header-anchor" href="#gitlab-pages-原理" aria-hidden="true">#</a></h2><p>首先了解一下 GitLab Pages 运行的原理。与 GitHub 不同的是，GitLab 需要上传一个 <code>.gitlab-ci.yml</code> 的文件，同时生成的项目文件必须要到 <code>/public</code> 目录中，见<a href="https://about.gitlab.com/features/pages/" target="_blank" rel="noreferrer">详情</a>。</p><div class="language-yml"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">## .gitlab-ci.yml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:9.11.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">pages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">cache</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">paths</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node_modules/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm install</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm run docs:build</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">artifacts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">paths</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">public</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">only</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">master</span></span>
<span class="line"></span></code></pre></div><h2 id="vuepress" tabindex="-1">Vuepress <a class="header-anchor" href="#vuepress" aria-hidden="true">#</a></h2><p>你可以将 vuepress 安装到全局，也可以将其安装到项目中，我建议选择第二种，后面介绍一下原因</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 创建并进入工程</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project-name</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project-name</span></span>
<span class="line"></span></code></pre></div><p>创建<code>package.json</code></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">docs:dev</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vuepress dev docs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">docs:build</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vuepress build docs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">devDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">vuepress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^0.14.2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 安装依赖</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 或 npm install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 创建并进入docs目录</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 创建一个 markdown 文件</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"># Hello VuePress</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">README.md</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动项目</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs:dev</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 或 npm run docs:dev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 编译项目至 &#39;/project-name/public&#39; 中</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs:dev</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 或 npm run docs:dev</span></span>
<span class="line"></span></code></pre></div><h2 id="遇到的坑" tabindex="-1">遇到的坑 <a class="header-anchor" href="#遇到的坑" aria-hidden="true">#</a></h2><p>其实到这里只是简单的启动了一个 vuepress 项目，但是你还应该花点时间去仔细阅读一下官网的主题配置，去配置你自己的各种导航，并注意下的页面的设置（主要是主页）。</p><ul><li>valine 的引用必须放到 mounted 中，否则无法编译，报错，window is undefined</li></ul><h2 id="修改主题" tabindex="-1">修改主题 <a class="header-anchor" href="#修改主题" aria-hidden="true">#</a></h2><p>另外 vuepress 适合撸项目文档，至于你要用它来写博客，它并没有分类、标签这样的配置，需要你去修改主题，有两种方式：</p><ol><li>将主题文件放到 <code>project-name/docs/.vuepress/theme</code> 中，然后创建一个 <code>Layout.vue</code> 文件：</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">└─ .vuepress</span></span>
<span class="line"><span style="color:#A6ACCD;">   └─ theme</span></span>
<span class="line"><span style="color:#A6ACCD;">      └─ Layout.vue</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>这儿和开发一个正常的 Vue 应用程序是一样的。完全取决于你如何组织你的主题。</p><ol start="2"><li>从依赖中引用主题，要使用 npm 依赖项的主题，请在 <code>.vuepress/config.js</code> 中提供一个 theme 选项：</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">theme</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">reco</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>郑重推荐 <strong>vuepress-theme-reco</strong> ，查看 <a href="http://recoluan.gitlab.io/" target="_blank" rel="noreferrer">展示</a> 既没有脱离默认主题的简洁，又增加了分类、分页、标签等功能。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 安装</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vuepress-theme-reco</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># npm install vuepress-theme-reco</span></span>
<span class="line"></span></code></pre></div><p>转自博客：<a href="http://recoluan.gitlab.io" target="_blank" rel="noreferrer"><strong>午后南杂</strong></a></p>`,23),o=[e];function t(c,r,i,y,D,C){return n(),a("div",null,o)}const A=s(p,[["render",t]]);export{d as __pageData,A as default};
