import{_ as d}from"./chunks/ArticleMetadata.dd4bf5dc.js";import{_ as y,c as h,b as o,f as n,g as e,w as C,a as A,i as p,o as t,e as B,j as g}from"./app.960cb299.js";const u="/assets/201912312031666.e83a3a00.png",D="/assets/201912312031777.b7a93c65.png",b="/assets/201912312031888.0af56fcf.png",F="/assets/201912312031999.ad0048b1.png",k="/assets/201912312032666.cb422625.png",v="/assets/201912312032777.c508a240.png",m="/assets/202209012051588.e6369340.png",I=JSON.parse('{"title":"个人常用 Linux 命令","description":"","frontmatter":{"title":"个人常用 Linux 命令","author":"查尔斯","date":"2019/12/31 21:00","isTop":true,"categories":["杂碎逆袭史"],"tags":["Linux"]},"headers":[{"level":2,"title":"系统相关","slug":"系统相关","link":"#系统相关","children":[{"level":3,"title":"查询系统详情","slug":"查询系统详情","link":"#查询系统详情","children":[]},{"level":3,"title":"查询系统发行版本","slug":"查询系统发行版本","link":"#查询系统发行版本","children":[]},{"level":3,"title":"查看CPU信息","slug":"查看cpu信息","link":"#查看cpu信息","children":[]},{"level":3,"title":"查询环境变量","slug":"查询环境变量","link":"#查询环境变量","children":[]},{"level":3,"title":"编辑环境变量","slug":"编辑环境变量","link":"#编辑环境变量","children":[]},{"level":3,"title":"查询端口占用","slug":"查询端口占用","link":"#查询端口占用","children":[]},{"level":3,"title":"查询程序位置","slug":"查询程序位置","link":"#查询程序位置","children":[]}]},{"level":2,"title":"防火墙相关","slug":"防火墙相关","link":"#防火墙相关","children":[{"level":3,"title":"查看防火墙状态","slug":"查看防火墙状态","link":"#查看防火墙状态","children":[]},{"level":3,"title":"开启防火墙","slug":"开启防火墙","link":"#开启防火墙","children":[]},{"level":3,"title":"关闭防火墙","slug":"关闭防火墙","link":"#关闭防火墙","children":[]},{"level":3,"title":"查看开放的端口列表","slug":"查看开放的端口列表","link":"#查看开放的端口列表","children":[]},{"level":3,"title":"查看防火墙某个端口是否开放","slug":"查看防火墙某个端口是否开放","link":"#查看防火墙某个端口是否开放","children":[]},{"level":3,"title":"开放端口","slug":"开放端口","link":"#开放端口","children":[]},{"level":3,"title":"关闭端口","slug":"关闭端口","link":"#关闭端口","children":[]},{"level":3,"title":"重启防火墙（防火墙配置立即生效）","slug":"重启防火墙-防火墙配置立即生效","link":"#重启防火墙-防火墙配置立即生效","children":[]}]},{"level":2,"title":"系统服务相关","slug":"系统服务相关","link":"#系统服务相关","children":[{"level":3,"title":"查看服务状态","slug":"查看服务状态","link":"#查看服务状态","children":[]},{"level":3,"title":"重新加载服务配置","slug":"重新加载服务配置","link":"#重新加载服务配置","children":[]},{"level":3,"title":"启动服务","slug":"启动服务","link":"#启动服务","children":[]},{"level":3,"title":"停止服务","slug":"停止服务","link":"#停止服务","children":[]},{"level":3,"title":"重启服务","slug":"重启服务","link":"#重启服务","children":[]},{"level":3,"title":"设置服务开机自启","slug":"设置服务开机自启","link":"#设置服务开机自启","children":[]},{"level":3,"title":"创建服务","slug":"创建服务","link":"#创建服务","children":[]}]},{"level":2,"title":"监控相关","slug":"监控相关","link":"#监控相关","children":[{"level":3,"title":"查询RAM信息(内存)","slug":"查询ram信息-内存","link":"#查询ram信息-内存","children":[]},{"level":3,"title":"查询ROM信息(磁盘)","slug":"查询rom信息-磁盘","link":"#查询rom信息-磁盘","children":[]},{"level":3,"title":"查看当前进程状态","slug":"查看当前进程状态","link":"#查看当前进程状态","children":[]},{"level":3,"title":"实时显示进程状态","slug":"实时显示进程状态","link":"#实时显示进程状态","children":[]},{"level":3,"title":"查看socket状态","slug":"查看socket状态","link":"#查看socket状态","children":[]}]},{"level":2,"title":"文件和目录相关","slug":"文件和目录相关","link":"#文件和目录相关","children":[{"level":3,"title":"创建文件","slug":"创建文件","link":"#创建文件","children":[]},{"level":3,"title":"创建目录","slug":"创建目录","link":"#创建目录","children":[]},{"level":3,"title":"删除文件或目录","slug":"删除文件或目录","link":"#删除文件或目录","children":[]},{"level":3,"title":"复制文件或目录","slug":"复制文件或目录","link":"#复制文件或目录","children":[]},{"level":3,"title":"剪切/移动文件或目录","slug":"剪切-移动文件或目录","link":"#剪切-移动文件或目录","children":[]},{"level":3,"title":"编辑文件","slug":"编辑文件","link":"#编辑文件","children":[]},{"level":3,"title":"查找文件","slug":"查找文件","link":"#查找文件","children":[]}]},{"level":2,"title":"下载工具","slug":"下载工具","link":"#下载工具","children":[]}],"relativePath":"categories/fragments/2019/12/31/个人常用Linux命令.md","lastUpdated":1677831742000}'),x={name:"categories/fragments/2019/12/31/个人常用Linux命令.md"},f={id:"个人常用-linux-命令",tabindex:"-1"},E=o("a",{class:"header-anchor",href:"#个人常用-linux-命令","aria-hidden":"true"},"#",-1),_=A(`<h2 id="系统相关" tabindex="-1">系统相关 <a class="header-anchor" href="#系统相关" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">已测试系统</p><p>CentOS 7.5、8.2</p></div><h3 id="查询系统详情" tabindex="-1">查询系统详情 <a class="header-anchor" href="#查询系统详情" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 详细输出所有信息，依次为内核名称，主机名，内核版本号，内核版本，硬件名，处理器类型，硬件平台类型，操作系统名称</span></span>
<span class="line"><span style="color:#FFCB6B;">uname</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 详细输出所有信息，依次为内核名称，主机名，内核版本号，内核版本，硬件名，处理器类型，硬件平台类型，操作系统名称</span></span>
<span class="line"><span style="color:#ABB2BF;">uname </span><span style="color:#D19A66;">-a</span></span>
<span class="line"></span></code></pre></div><p><img src="`+u+`" alt="201912312031666"></p><h3 id="查询系统发行版本" tabindex="-1">查询系统发行版本 <a class="header-anchor" href="#查询系统发行版本" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 只适合Redhat系的Linux</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/redhat-release</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 只适合Redhat系的Linux</span></span>
<span class="line"><span style="color:#ABB2BF;">cat </span><span style="color:#98C379;">/etc/redhat-release</span></span>
<span class="line"></span></code></pre></div><p><img src="`+D+`" alt="201912312031777"></p><h3 id="查看cpu信息" tabindex="-1">查看CPU信息 <a class="header-anchor" href="#查看cpu信息" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 逻辑CPU数量和CPU型号</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/proc/cpuinfo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">cut</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uniq</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-c</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 逻辑CPU数量和CPU型号</span></span>
<span class="line"><span style="color:#ABB2BF;">cat </span><span style="color:#98C379;">/proc/cpuinfo</span><span style="color:#ABB2BF;"> | grep </span><span style="color:#98C379;">name</span><span style="color:#ABB2BF;"> | cut </span><span style="color:#D19A66;">-f2</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-d:</span><span style="color:#ABB2BF;"> | uniq </span><span style="color:#D19A66;">-c</span></span>
<span class="line"></span></code></pre></div><p><img src="`+b+`" alt="201912312031888"></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># CPU真实数量（有时候虽然逻辑CPU是8核，但可能是由两颗4核CPU构成的）</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/proc/cpuinfo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">physical</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uniq</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-c</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># CPU真实数量（有时候虽然逻辑CPU是8核，但可能是由两颗4核CPU构成的）</span></span>
<span class="line"><span style="color:#ABB2BF;">cat </span><span style="color:#98C379;">/proc/cpuinfo</span><span style="color:#ABB2BF;"> | grep </span><span style="color:#98C379;">physical</span><span style="color:#ABB2BF;"> | uniq </span><span style="color:#D19A66;">-c</span></span>
<span class="line"></span></code></pre></div><p><img src="`+F+`" alt="201912312031999"></p><h3 id="查询环境变量" tabindex="-1">查询环境变量 <a class="header-anchor" href="#查询环境变量" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">env</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 过滤环境变量中的配置</span></span>
<span class="line"><span style="color:#FFCB6B;">env</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">env</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 过滤环境变量中的配置</span></span>
<span class="line"><span style="color:#ABB2BF;">env | grep </span><span style="color:#98C379;">xxx</span></span>
<span class="line"></span></code></pre></div><h3 id="编辑环境变量" tabindex="-1">编辑环境变量 <a class="header-anchor" href="#编辑环境变量" aria-hidden="true">#</a></h3><ol><li><p>编辑 /etc/profile 文件</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/profile</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">vim </span><span style="color:#98C379;">/etc/profile</span></span>
<span class="line"></span></code></pre></div></li><li><p>在文件末尾插入环境变量配置</p><p>打开编辑器后，按下 shift + g，跳转到文件末尾，按 o 进入插入模式，将下方配置插入进去后，按 ESC 进入一般模式，再按 :wq 保存并退出。</p><p>例如：插入 JAVA_HOME 环境变量配置</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">JAVA_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/opt/disk/java/jdk1.8.0_202</span></span>
<span class="line"><span style="color:#A6ACCD;">CLASSPATH</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">.:</span><span style="color:#A6ACCD;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib.tools.jar</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">$JAVA_HOME</span><span style="color:#C3E88D;">/bin:</span><span style="color:#A6ACCD;">$PATH</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> JAVA_HOME CLASSPATH PATH</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#E06C75;">JAVA_HOME</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">/opt/disk/java/jdk1.8.0_202</span></span>
<span class="line"><span style="color:#E06C75;">CLASSPATH</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">.:</span><span style="color:#E06C75;">$JAVA_HOME</span><span style="color:#98C379;">/lib.tools.jar</span></span>
<span class="line"><span style="color:#E06C75;">PATH</span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;">$JAVA_HOME</span><span style="color:#98C379;">/bin:</span><span style="color:#E06C75;">$PATH</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> JAVA_HOME CLASSPATH PATH</span></span>
<span class="line"></span></code></pre></div></li><li><p>重新加载 /etc/profile 文件，使最新配置生效</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/profile</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">source</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/etc/profile</span></span>
<span class="line"></span></code></pre></div></li></ol><h3 id="查询端口占用" tabindex="-1">查询端口占用 <a class="header-anchor" href="#查询端口占用" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 查询指定端口占用情况，还可以显示出占用该端口的进程 PID</span></span>
<span class="line"><span style="color:#FFCB6B;">netstat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-anp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">端口号</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 查询指定端口占用情况，还可以显示出占用该端口的进程 PID</span></span>
<span class="line"><span style="color:#ABB2BF;">netstat </span><span style="color:#D19A66;">-anp</span><span style="color:#ABB2BF;"> | grep </span><span style="color:#98C379;">端口号</span></span>
<span class="line"></span></code></pre></div><h3 id="查询程序位置" tabindex="-1">查询程序位置 <a class="header-anchor" href="#查询程序位置" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">whereis</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">程序名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">whereis </span><span style="color:#98C379;">程序名</span></span>
<span class="line"></span></code></pre></div><h2 id="防火墙相关" tabindex="-1">防火墙相关 <a class="header-anchor" href="#防火墙相关" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">已测试系统</p><p>CentOS 7.5、8.2</p></div><h3 id="查看防火墙状态" tabindex="-1">查看防火墙状态 <a class="header-anchor" href="#查看防火墙状态" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">status</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">firewalld</span></span>
<span class="line"></span></code></pre></div><h3 id="开启防火墙" tabindex="-1">开启防火墙 <a class="header-anchor" href="#开启防火墙" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">start</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">firewalld</span></span>
<span class="line"></span></code></pre></div><h3 id="关闭防火墙" tabindex="-1">关闭防火墙 <a class="header-anchor" href="#关闭防火墙" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">stop</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">firewalld</span></span>
<span class="line"></span></code></pre></div><h3 id="查看开放的端口列表" tabindex="-1">查看开放的端口列表 <a class="header-anchor" href="#查看开放的端口列表" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--list-ports</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">firewall-cmd </span><span style="color:#D19A66;">--zone=public</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--list-ports</span></span>
<span class="line"></span></code></pre></div><h3 id="查看防火墙某个端口是否开放" tabindex="-1">查看防火墙某个端口是否开放 <a class="header-anchor" href="#查看防火墙某个端口是否开放" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--query-port=端口号/tcp</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">firewall-cmd </span><span style="color:#D19A66;">--query-port=端口号/tcp</span></span>
<span class="line"></span></code></pre></div><h3 id="开放端口" tabindex="-1">开放端口 <a class="header-anchor" href="#开放端口" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 开放某个端口</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=端口号/tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 开放指定端口范围</span></span>
<span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=端口号起-端口号止/tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 开放某个端口</span></span>
<span class="line"><span style="color:#ABB2BF;">firewall-cmd </span><span style="color:#D19A66;">--zone=public</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--add-port=端口号/tcp</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--permanent</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 开放指定端口范围</span></span>
<span class="line"><span style="color:#ABB2BF;">firewall-cmd </span><span style="color:#D19A66;">--zone=public</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--add-port=端口号起-端口号止/tcp</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--permanent</span></span>
<span class="line"></span></code></pre></div><h3 id="关闭端口" tabindex="-1">关闭端口 <a class="header-anchor" href="#关闭端口" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--remove-port=端口号/tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">firewall-cmd </span><span style="color:#D19A66;">--zone=public</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--remove-port=端口号/tcp</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--permanent</span></span>
<span class="line"></span></code></pre></div><h3 id="重启防火墙-防火墙配置立即生效" tabindex="-1">重启防火墙（防火墙配置立即生效） <a class="header-anchor" href="#重启防火墙-防火墙配置立即生效" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--reload</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">firewall-cmd </span><span style="color:#D19A66;">--reload</span></span>
<span class="line"></span></code></pre></div><h2 id="系统服务相关" tabindex="-1">系统服务相关 <a class="header-anchor" href="#系统服务相关" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">已测试系统</p><p>CentOS 7.5、8.2</p></div><h3 id="查看服务状态" tabindex="-1">查看服务状态 <a class="header-anchor" href="#查看服务状态" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">服务名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">status</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">服务名</span></span>
<span class="line"></span></code></pre></div><h3 id="重新加载服务配置" tabindex="-1">重新加载服务配置 <a class="header-anchor" href="#重新加载服务配置" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">daemon-reload</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">daemon-reload</span></span>
<span class="line"></span></code></pre></div><h3 id="启动服务" tabindex="-1">启动服务 <a class="header-anchor" href="#启动服务" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">服务名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">start</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">服务名</span></span>
<span class="line"></span></code></pre></div><h3 id="停止服务" tabindex="-1">停止服务 <a class="header-anchor" href="#停止服务" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">服务名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">stop</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">服务名</span></span>
<span class="line"></span></code></pre></div><h3 id="重启服务" tabindex="-1">重启服务 <a class="header-anchor" href="#重启服务" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">服务名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">restart</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">服务名</span></span>
<span class="line"></span></code></pre></div><h3 id="设置服务开机自启" tabindex="-1">设置服务开机自启 <a class="header-anchor" href="#设置服务开机自启" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 开机自启</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">服务名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 取消服务开机自启</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">diable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">服务名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 开机自启</span></span>
<span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">enable</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">服务名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 取消服务开机自启</span></span>
<span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">diable</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">服务名</span></span>
<span class="line"></span></code></pre></div><h3 id="创建服务" tabindex="-1">创建服务 <a class="header-anchor" href="#创建服务" aria-hidden="true">#</a></h3><ol><li><p>创建并编辑服务文件</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/systemd/system/服务名.service</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">vim </span><span style="color:#98C379;">/etc/systemd/system/服务名.service</span></span>
<span class="line"></span></code></pre></div></li><li><p>编写服务配置</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Unit</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">Description</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">服务描述</span></span>
<span class="line"><span style="color:#A6ACCD;">Wants</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">network-online.target</span></span>
<span class="line"><span style="color:#A6ACCD;">After</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">network-online.target</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Service</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 设置环境变量</span></span>
<span class="line"><span style="color:#A6ACCD;">Environment</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxx=xxx</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 设置服务执行命令或脚本</span></span>
<span class="line"><span style="color:#A6ACCD;">ExecStart</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/bin/bash</span><span style="color:#A6ACCD;"> xxx.sh</span></span>
<span class="line"><span style="color:#A6ACCD;">KillSignal</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">SIGTERM</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Install</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">WantedBy</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">multi-user.target</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[Unit]</span></span>
<span class="line"><span style="color:#E06C75;">Description</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">服务描述</span></span>
<span class="line"><span style="color:#E06C75;">Wants</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">network-online.target</span></span>
<span class="line"><span style="color:#E06C75;">After</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">network-online.target</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">[Service]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 设置环境变量</span></span>
<span class="line"><span style="color:#E06C75;">Environment</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;xxx=xxx&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 设置服务执行命令或脚本</span></span>
<span class="line"><span style="color:#E06C75;">ExecStart</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">/bin/bash</span><span style="color:#ABB2BF;"> xxx.sh</span></span>
<span class="line"><span style="color:#E06C75;">KillSignal</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">SIGTERM</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">[Install]</span></span>
<span class="line"><span style="color:#E06C75;">WantedBy</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">multi-user.target</span></span>
<span class="line"></span></code></pre></div></li><li><p>重新加载服务配置</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">daemon-reload</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">daemon-reload</span></span>
<span class="line"></span></code></pre></div></li><li><p>启动服务</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">systemctl start 服务名</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">systemctl start 服务名</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre></div></li><li><p>设置服务开机自启</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">服务名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">enable</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">服务名</span></span>
<span class="line"></span></code></pre></div></li></ol><h2 id="监控相关" tabindex="-1">监控相关 <a class="header-anchor" href="#监控相关" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">已测试系统</p><p>CentOS 7.5、8.2</p></div><h3 id="查询ram信息-内存" tabindex="-1">查询RAM信息(内存) <a class="header-anchor" href="#查询ram信息-内存" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 用于查看有关系统 RAM 使用情况的信息（带大小单位）</span></span>
<span class="line"><span style="color:#FFCB6B;">free</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-h</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 用于查看有关系统 RAM 使用情况的信息（带大小单位）</span></span>
<span class="line"><span style="color:#ABB2BF;">free </span><span style="color:#D19A66;">-h</span></span>
<span class="line"></span></code></pre></div><p><img src="`+k+`" alt="201912312032666"></p><h3 id="查询rom信息-磁盘" tabindex="-1">查询ROM信息(磁盘) <a class="header-anchor" href="#查询rom信息-磁盘" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 以磁盘分区为单位查看文件系统，可以获取硬盘被占用了多少空间，目前还剩下多少空间等信息</span></span>
<span class="line"><span style="color:#FFCB6B;">df</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-h</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 以磁盘分区为单位查看文件系统，可以获取硬盘被占用了多少空间，目前还剩下多少空间等信息</span></span>
<span class="line"><span style="color:#ABB2BF;">df </span><span style="color:#D19A66;">-h</span></span>
<span class="line"></span></code></pre></div><p><img src="`+v+`" alt="201912312032777"></p><h3 id="查看当前进程状态" tabindex="-1">查看当前进程状态 <a class="header-anchor" href="#查看当前进程状态" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ps</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">ps</span></span>
<span class="line"></span></code></pre></div><h4 id="常见用法" tabindex="-1">常见用法 <a class="header-anchor" href="#常见用法" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 查询指定进程</span></span>
<span class="line"><span style="color:#FFCB6B;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ef</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">进程关键字</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 查询指定进程</span></span>
<span class="line"><span style="color:#ABB2BF;">ps </span><span style="color:#D19A66;">-ef</span><span style="color:#ABB2BF;"> | grep </span><span style="color:#98C379;">进程关键字</span></span>
<span class="line"></span></code></pre></div><p>查询后我们往往还会使用 <code>kill</code> 或 <code>pkill</code> 命令来结束指定进程。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 通过进程ID，结束指定进程（-9代表无条件退出）</span></span>
<span class="line"><span style="color:#82AAFF;">kill</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">进程ID</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 通过进程名，结束指定进程</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 例如：nginx启动后是两个进程，想要结束还需要分别 kill -9，直接 pkill -9 nginx 一次就搞定了</span></span>
<span class="line"><span style="color:#FFCB6B;">pkill</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">进程名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 通过进程ID，结束指定进程（-9代表无条件退出）</span></span>
<span class="line"><span style="color:#56B6C2;">kill</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-9</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">进程ID</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 通过进程名，结束指定进程</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 例如：nginx启动后是两个进程，想要结束还需要分别 kill -9，直接 pkill -9 nginx 一次就搞定了</span></span>
<span class="line"><span style="color:#ABB2BF;">pkill </span><span style="color:#D19A66;">-9</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">进程名</span></span>
<span class="line"></span></code></pre></div><h3 id="实时显示进程状态" tabindex="-1">实时显示进程状态 <a class="header-anchor" href="#实时显示进程状态" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 空格键手动刷新，按 q 键退出</span></span>
<span class="line"><span style="color:#FFCB6B;">top</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 空格键手动刷新，按 q 键退出</span></span>
<span class="line"><span style="color:#ABB2BF;">top</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">笔者说</p><p>top 命令也是用来查看进程状态的，相比于 ps 命令，top 命令不同之处如下：</p><ol><li>top 命令可以持续监视进程信息，ps 命令是进程运行情况的 &quot;快照&quot;</li><li>top 命令可以监视CPU负载、内存负载等综合系统信息</li><li>top 命令可以监视进程的CPU、内存占用情况，按占用资源的大小降序排列</li><li>top 命令可以操作进程，改变进程优先级</li></ol><p>简单记忆的话就是：ps 命令一般是用于查看某个进程是否在运行的命令，而 top 命令一般是用于查看哪些进程占用CPU、内存较高，好让我们能对它进行“优化”的命令。</p></div><p><img src="`+m+`" alt="202209012051588"></p><p>前 5 行是系统整体统计信息，包含系统情况、进程情况、CPU情况、内存情况在内的综合内容。</p><p>第 1 行是系统情况：</p><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">20:49:35 up 199 days</td><td style="text-align:left;">当前系统时间及系统运行时长</td></tr><tr><td style="text-align:left;">2 users</td><td style="text-align:left;">当前登录用户数</td></tr><tr><td style="text-align:left;">load average: 0.01, 0.04, 0.05</td><td style="text-align:left;">系统负载，即任务队列的平均长度。 三个数值分别为 1分钟、5分钟、15分钟前到现在的平均值。</td></tr></tbody></table><p>第 2 行是进程情况：</p><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">xxx total</td><td style="text-align:left;">进程总数</td></tr><tr><td style="text-align:left;">xxx running</td><td style="text-align:left;">正在运行的进程数</td></tr><tr><td style="text-align:left;">xxx sleeping</td><td style="text-align:left;">睡眠的进程数</td></tr><tr><td style="text-align:left;">xxx stopped</td><td style="text-align:left;">停止的进程数</td></tr><tr><td style="text-align:left;">xxx zombie</td><td style="text-align:left;">僵尸进程数</td></tr></tbody></table><p>第 3 行是 CPU 情况：（当有多个 CPU 时，会有多行显示）</p><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">us</td><td style="text-align:left;">用户空间占用 CPU 百分比</td></tr><tr><td style="text-align:left;">sy</td><td style="text-align:left;">内核空间占用 CPU 百分比</td></tr><tr><td style="text-align:left;">ni</td><td style="text-align:left;">用户进程空间内改变过优先级的进程占用CPU百分比</td></tr><tr><td style="text-align:left;">id (idle)</td><td style="text-align:left;">空闲 CPU 百分比</td></tr><tr><td style="text-align:left;">wa</td><td style="text-align:left;">等待输入输出的 CPU 时间百分比</td></tr><tr><td style="text-align:left;">hi (hardware IRQ)</td><td style="text-align:left;">硬中断占用 CPU 的百分比</td></tr><tr><td style="text-align:left;">si (software interrupts)</td><td style="text-align:left;">软中断占用 CPU 的百分比</td></tr><tr><td style="text-align:left;">st (steal time)</td><td style="text-align:left;">当 hypervisor 服务另一个虚拟处理器的时候，虚拟 CPU 等待实际 CPU 的时间的百分比</td></tr></tbody></table><p>第 4 行是物理内存情况：</p><table><thead><tr><th>内容</th><th>含义</th></tr></thead><tbody><tr><td>total</td><td>物理内存总量</td></tr><tr><td>free</td><td>空闲的物理内存量</td></tr><tr><td>used</td><td>使用的物理内存量</td></tr><tr><td>buffers/cached</td><td>用作内核缓存的物理内存量</td></tr></tbody></table><p>第 5 行是交换区内存情况：</p><table><thead><tr><th>内容</th><th>含义</th></tr></thead><tbody><tr><td>total</td><td>交换区总量</td></tr><tr><td>used</td><td>使用的交换区量</td></tr><tr><td>free</td><td>空闲的交换区量</td></tr><tr><td>avail Mem</td><td>可用的内存量</td></tr></tbody></table><p>再往下的信息表，每列信息的含义如下：</p><table><thead><tr><th>内容</th><th>含义</th></tr></thead><tbody><tr><td>PID</td><td>进程ID</td></tr><tr><td>USER</td><td>进程所有者</td></tr><tr><td>PR</td><td>优先级（由内核动态调整，用户不可调整）</td></tr><tr><td>NI</td><td>进程优先级（负值表示高优先级，正值表示低优先级，用户可调整）</td></tr><tr><td>VIRT (virtual memory usage)</td><td>进程所使用的虚拟内存</td></tr><tr><td>RES (resident memory usage)</td><td>进程所使用的物理内存</td></tr><tr><td>SHR (shared memory)</td><td>进程所使用的共享内存</td></tr><tr><td>S (status)</td><td>进程状态（D：不可中断的睡眠状态；R：运行中或可运行状态；S：睡眠状态；T：已跟踪/已停止状态；Z：僵停状态）</td></tr><tr><td>%CPU</td><td>进程使用的 CPU 百分比</td></tr><tr><td>%MEM</td><td>进程使用的物理内存百分比</td></tr><tr><td>TIME+</td><td>进程使用的 CPU 时间总计，单位1/100秒</td></tr><tr><td>COMMAND</td><td>命令名</td></tr></tbody></table><h3 id="查看socket状态" tabindex="-1">查看socket状态 <a class="header-anchor" href="#查看socket状态" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># -t：显示 tcp socket</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -a：显示所有的</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -l：显示本地打开的端口</span></span>
<span class="line"><span style="color:#FFCB6B;">ss</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-tal</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># -t：显示 tcp socket</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># -a：显示所有的</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># -l：显示本地打开的端口</span></span>
<span class="line"><span style="color:#ABB2BF;">ss </span><span style="color:#D19A66;">-tal</span></span>
<span class="line"></span></code></pre></div><h2 id="文件和目录相关" tabindex="-1">文件和目录相关 <a class="header-anchor" href="#文件和目录相关" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">已测试系统</p><p>CentOS 7.5、8.2</p></div><h3 id="创建文件" tabindex="-1">创建文件 <a class="header-anchor" href="#创建文件" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">touch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">touch </span><span style="color:#98C379;">文件名</span></span>
<span class="line"></span></code></pre></div><h3 id="创建目录" tabindex="-1">创建目录 <a class="header-anchor" href="#创建目录" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># -p 表示当该目录的父目录不存在时，会自动创建</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">目录路径</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># -p 表示当该目录的父目录不存在时，会自动创建</span></span>
<span class="line"><span style="color:#ABB2BF;">mkdir </span><span style="color:#D19A66;">-p</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">目录路径</span></span>
<span class="line"></span></code></pre></div><p>例如：</p><ul><li><code>mkdir -p /opt/disk/software</code> 创建 software 目录</li><li><code>mkdir -p /opt/disk/{software,data}</code> 同时创建 software 和 data 两个目录，甚至可以更多</li></ul><h3 id="删除文件或目录" tabindex="-1">删除文件或目录 <a class="header-anchor" href="#删除文件或目录" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># -r 对目录进行递归删除，包含子目录</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -f 删除时不进行确认</span></span>
<span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名/目录名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># -r 对目录进行递归删除，包含子目录</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># -f 删除时不进行确认</span></span>
<span class="line"><span style="color:#ABB2BF;">rm </span><span style="color:#D19A66;">-rf</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">文件名/目录名</span></span>
<span class="line"></span></code></pre></div><p>如果想删除指定目录下除某个文件及某个目录之外的所有文件，可以试试通配符匹配：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 但使用前先记得开启通配符功能，可以通过 shopt -s 查看是否开启了，on 表示已经开启</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># shopt -s extglob</span></span>
<span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">!</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">target_file</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">target_dir</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 但使用前先记得开启通配符功能，可以通过 shopt -s 查看是否开启了，on 表示已经开启</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># shopt -s extglob</span></span>
<span class="line"><span style="color:#ABB2BF;">rm </span><span style="color:#D19A66;">-rf</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">!</span><span style="color:#ABB2BF;">(target_file|target_dir)</span></span>
<span class="line"></span></code></pre></div><h3 id="复制文件或目录" tabindex="-1">复制文件或目录 <a class="header-anchor" href="#复制文件或目录" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名/目录名</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">目录路径</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">cp </span><span style="color:#98C379;">文件名/目录名</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">目录路径</span></span>
<span class="line"></span></code></pre></div><p>例如：</p><ul><li><code>cp test test2</code>： <ul><li>如果 test2 目录存在，表示将 test 目录复制一份到 test2 目录下</li><li>如果 test2 目录不存在，表示将 test 目录在当前目录下复制一份，命名为 test2 目录（cp 命令还可以在复制时实现文件/目录的重命名操作）</li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">无法执行的强制覆盖</p><p>大多数情况下，命令后带上 <code>-f</code> 参数就代表要强制执行，不需要进行确认输入。可当我们在 cp 命令后加上 <code>-f</code> 命令后，却发现当指定位置下存在同名文件/目录时，它依然会提示我们要进行确认。这是为什么呢？</p><p>输入 <code>alias cp</code> 命令，然后可以看到这么一行输出，它输出的内容在告诉我们 cp 命令实际上是 <code>cp -i</code> 命令的别名 。</p><p><code>alias cp=&#39;cp -i&#39;</code></p><p>它代表着 cp 命令在执行时，实际执行的是 <code>cp -i</code>，<code>-i</code> 表示如果要复制到位置已经有同名文件，会进行确认提示是否覆盖。</p><p>如果你依然想强制覆盖，有两种方法：</p><ol><li>使用原生 cp 命令：<code>/bin/cp -rf 文件名/目录名 目录路径</code></li><li>临时接触 cp 命令别名设置：<code>unalias cp</code></li></ol></div><h3 id="剪切-移动文件或目录" tabindex="-1">剪切/移动文件或目录 <a class="header-anchor" href="#剪切-移动文件或目录" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名/目录名</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">目录路径</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">mv </span><span style="color:#98C379;">文件名/目录名</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">目录路径</span></span>
<span class="line"></span></code></pre></div><p>例如：<code>mv</code> 命令不需要 <code>-r</code> 命令，即可递归移动子目录</p><ul><li><code>mv test test2</code>： <ul><li>如果 test2 目录存在，表示将 test 目录移动到 test2 目录下</li><li>如果 test2 目录不存在，表示将 test 目录重命名为 test2（mv 命令还可以在剪切/移动时实现文件/目录的重命名操作，所以，虽然 Linux 中没有重命名命令，但你只要在原目录下对文件/目录进行剪切/移动，那就可以实现重命名的效果了）</li></ul></li></ul><h3 id="编辑文件" tabindex="-1">编辑文件 <a class="header-anchor" href="#编辑文件" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 如果指定位置不存在该名称文件，则在保存时自动新建</span></span>
<span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># vim 是 vi 的升级版，类似于 notepad 和 notepad++，额外支持语法高亮等功能</span></span>
<span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 如果指定位置不存在该名称文件，则在保存时自动新建</span></span>
<span class="line"><span style="color:#ABB2BF;">vi </span><span style="color:#98C379;">文件名</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># vim 是 vi 的升级版，类似于 notepad 和 notepad++，额外支持语法高亮等功能</span></span>
<span class="line"><span style="color:#ABB2BF;">vim </span><span style="color:#98C379;">文件名</span></span>
<span class="line"></span></code></pre></div><p>常见操作：</p><ul><li><p>一般模式（默认进入一般模式，此时为只读状态）</p><ul><li><p>按 <code>i</code> 键：进入插入模式，在当前光标左侧插入</p></li><li><p>按 <code>I</code> 键：进入插入模式，在当前光标所在行行首插入</p></li><li><p>按 <code>a</code> 键：进入插入模式，在当前光标右侧插入</p></li><li><p>按 <code>A</code> 键：进入插入模式，在当前光标所在行行尾插入</p></li><li><p>按 <code>o</code> 键：进入插入模式，在当前光标所在行下一行插入</p></li><li><p>按 <code>O</code> 键：进入插入模式，在当前光标所在行上一行插入</p></li><li><p>按 <code>r</code> 键：可以对光标所在位置进行替换，适合替换一个错误字符的情况</p></li><li><p>按 <code>yy</code> 键：复制当前光标所在行</p><ul><li>按 <code>p</code> 键：将按 <code>yy</code> 键复制的内容，粘贴到当前光标的下一行</li></ul></li><li><p>按 <code>:</code> 键：进入底行模式/命令模式</p></li></ul></li><li><p>插入模式</p><ul><li>按 <code>ESC</code> 键：退回到一般模式</li></ul></li><li><p>底行模式/命令模式</p><ul><li>输入 <code>w</code>：保存不退出</li><li>输入 <code>q</code>：退出（如果修改了文件，无法退出，只能使用强制退出）</li><li>输入 <code>wq</code> / <code>x</code>：保存并退出</li><li>输入 <code>q!</code>：强制退出</li></ul></li></ul><h3 id="查找文件" tabindex="-1">查找文件 <a class="header-anchor" href="#查找文件" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">find</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">目录名</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名关键词</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">find </span><span style="color:#98C379;">目录名</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-name</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">文件名关键词</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"></span></code></pre></div><p>例如：</p><ul><li><code>find / -name nginx</code>：全盘查找 nginx 文件</li></ul><h2 id="下载工具" tabindex="-1">下载工具 <a class="header-anchor" href="#下载工具" aria-hidden="true">#</a></h2><p>cURL 是一个网络数据传输项目，通常说 cURL 是指 curl 命令行工具，它支持 DICT、FILE、FTP、FTPS、Gopher、HTTP、HTTPS、IMAP、IMAPS、LDAP、LDAPS、POP3、POP3S、RTMP、RTSP、SCP、SFTP、SMB、SMBS、SMTP、SMTPS、Telnet 与 TFTP 等协议，而 curl 的底层使用的是 libcurl 库，libcurl 与 curl 组成了 cURL 项目。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># -f(--fail)：表示在服务器错误时，阻止一个返回的表示错误原因的 HTML 页面，而由 curl 命令返回一个错误码 22 来提示错误</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -s(--silent)：不显示错误和进度信息</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -S(--show-error)：指定只输出错误信息，通常与 -s 一起使用</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -L(--location)：让 HTTP 请求跟随服务器的重定向，curl 默认不跟随重定向</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-fsSL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://get.docker.com</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># -f(--fail)：表示在服务器错误时，阻止一个返回的表示错误原因的 HTML 页面，而由 curl 命令返回一个错误码 22 来提示错误</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># -s(--silent)：不显示错误和进度信息</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># -S(--show-error)：指定只输出错误信息，通常与 -s 一起使用</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># -L(--location)：让 HTTP 请求跟随服务器的重定向，curl 默认不跟随重定向</span></span>
<span class="line"><span style="color:#ABB2BF;">curl </span><span style="color:#D19A66;">-fsSL</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">https://get.docker.com</span></span>
<span class="line"></span></code></pre></div>`,120);function P(s,S,T,w,U,M){const c=p("Badge"),i=d,r=p("ClientOnly");return t(),h("div",null,[o("h1",f,[n("个人常用 Linux 命令 "),e(c,{type:"warning",text:"持续更新"}),n(),E]),e(r,null,{default:C(()=>{var a,l;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((l=s.$frontmatter)==null?void 0:l.showArticleMetadata)??!0)?(t(),B(i,{key:0,article:s.$frontmatter},null,8,["article"])):g("",!0)]}),_:1}),_])}const O=y(x,[["render",P]]);export{I as __pageData,O as default};
