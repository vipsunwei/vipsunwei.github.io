import{_ as s,c as a,o as n,e as o}from"./app.d80788de.js";const m=JSON.parse('{"title":"mongoDB设置权限登陆后，在keystonejs中创建新的数据库连接实例","description":"","frontmatter":{"title":"mongoDB设置权限登陆后，在keystonejs中创建新的数据库连接实例","date":"2017-11-01T00:00:00.000Z","author":"recoluan","tags":["mongoDB","keystoneJS"],"categories":["backEnd"]},"headers":[{"level":2,"title":"问题","slug":"问题","link":"#问题","children":[]},{"level":2,"title":"解决","slug":"解决","link":"#解决","children":[]}],"relativePath":"posts/2017/110102.md"}'),e={name:"posts/2017/110102.md"},t=o(`<h2 id="问题" tabindex="-1">问题 <a class="header-anchor" href="#问题" aria-hidden="true">#</a></h2><p>mongoDB 的默认登陆时无密码登陆的，为了安全起见，需要给 mongoDB 设置权限登录，但是 keystoneJS 默认是无密码登陆的，这是需要修改配置来解决问题</p><h2 id="解决" tabindex="-1">解决 <a class="header-anchor" href="#解决" aria-hidden="true">#</a></h2><p>在 keystone.js 中找到配置初始化方法，添加一个<a href="http://keystonejs.com/zh/docs/configuration/#options-database" target="_blank" rel="noreferrer">mongo</a>对象来设置 mongoDB 连接实例，</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">keystone</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">init</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">recoluan</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">brand</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">recoluan</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mongo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mongodb://user:password@host:port/dbName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>这里需要注意的是，mongoDB 在设置权限登录的时候，首先必须设置一个权限最大的主账户，它用来增删其他普通账户，记住，这个主账户时 <strong><em>无法</em></strong> 用来设置 mongo 对象的， 你需要用这个主账户创建一个数据库（下面称“dbName”），然后在这个 dbName 上再创建一个可读写 dbName 的普通账户，这个普通账户的 user 和 password 和 dbName 用来配置 mongo 对象</p>`,6),l=[t];function p(r,c,D,i,d,y){return n(),a("div",null,l)}const _=s(e,[["render",p]]);export{m as __pageData,_ as default};
