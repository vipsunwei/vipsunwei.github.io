import{_ as c}from"./chunks/ArticleMetadata.355516f3.js";import{_ as t,c as r,g as y,w as i,b as l,f as d,a as C,i as B,o as p,e as A,j as D}from"./app.4af0e587.js";const h="/assets/202210222130166.2c01aa58.png",_=JSON.parse('{"title":"CentOS 8.2 安装 MySQL 5.7.39","description":"","frontmatter":{"title":"CentOS 8.2 安装 MySQL 5.7.39","author":"查尔斯","date":"2022/10/22 21:30","categories":["MySQL快速入门"],"tags":["MySQL","Linux","CentOS"],"showComment":false},"headers":[{"level":2,"title":"检查系统是否自带MySQL","slug":"检查系统是否自带mysql","link":"#检查系统是否自带mysql","children":[]},{"level":2,"title":"安装依赖","slug":"安装依赖","link":"#安装依赖","children":[]},{"level":2,"title":"下载并上传安装包","slug":"下载并上传安装包","link":"#下载并上传安装包","children":[]},{"level":2,"title":"解压安装包","slug":"解压安装包","link":"#解压安装包","children":[]},{"level":2,"title":"创建mysql用户组和mysql用户","slug":"创建mysql用户组和mysql用户","link":"#创建mysql用户组和mysql用户","children":[]},{"level":2,"title":"创建配置文件","slug":"创建配置文件","link":"#创建配置文件","children":[]},{"level":2,"title":"安装并启动MySQL服务","slug":"安装并启动mysql服务","link":"#安装并启动mysql服务","children":[]},{"level":2,"title":"设置环境变量","slug":"设置环境变量","link":"#设置环境变量","children":[]},{"level":2,"title":"登录并修改密码","slug":"登录并修改密码","link":"#登录并修改密码","children":[]},{"level":2,"title":"创建用户并授权","slug":"创建用户并授权","link":"#创建用户并授权","children":[]}],"relativePath":"courses/mysql/03-附录/01-CentOS安装MySQL.md","lastUpdated":1677831742000}'),m={name:"courses/mysql/03-附录/01-CentOS安装MySQL.md"},F=l("h1",{id:"centos-8-2-安装-mysql-5-7-39",tabindex:"-1"},[d("CentOS 8.2 安装 MySQL 5.7.39 "),l("a",{class:"header-anchor",href:"#centos-8-2-安装-mysql-5-7-39","aria-hidden":"true"},"#")],-1),u=C(`<h2 id="检查系统是否自带mysql" tabindex="-1">检查系统是否自带MySQL <a class="header-anchor" href="#检查系统是否自带mysql" aria-hidden="true">#</a></h2><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>检查系统中是否已经安装了 MySQL 或 MariaDB ，如果已经安装了，那就必须提前卸载掉它们，否则它们占用的端口号、服务名或是一些其他配置很可能会干扰到后续我们要安装的 MySQL 版本。</p><p>以前笔者就遇到过几次由这个情况引发的问题，要么是 MySQL 无法安装成功，要么是 MySQL 安装成功后输入正确密码却登录不进去。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-qa</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"><span style="color:#FFCB6B;">rpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-qa</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mariadb</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果上方两条命令查询出了内容，就把查出的软件卸载掉</span></span>
<span class="line"><span style="color:#FFCB6B;">rpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--nodeps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">软件名</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">rpm </span><span style="color:#D19A66;">-qa</span><span style="color:#ABB2BF;"> | grep </span><span style="color:#98C379;">mysql</span></span>
<span class="line"><span style="color:#ABB2BF;">rpm </span><span style="color:#D19A66;">-qa</span><span style="color:#ABB2BF;"> | grep </span><span style="color:#98C379;">mariadb</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 如果上方两条命令查询出了内容，就把查出的软件卸载掉</span></span>
<span class="line"><span style="color:#ABB2BF;">rpm </span><span style="color:#D19A66;">-e</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--nodeps</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">软件名</span></span>
<span class="line"></span></code></pre></div><h2 id="安装依赖" tabindex="-1">安装依赖 <a class="header-anchor" href="#安装依赖" aria-hidden="true">#</a></h2><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>和在 Windows 系统中一样，Linux 系统中安装程序也需要准备好所需的运行库。</p><p>不确认安装好它们，那在安装 MySQL 时就会出现这样那样的依赖报错，像下面这段报错就是由于没有安装好 <code>libaio</code> 库引起的。</p><blockquote><p>/bin/mysqld: error while loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory</p></blockquote></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">numactl</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libncurses</span><span style="color:#A6ACCD;">*</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libaio</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">yum </span><span style="color:#D19A66;">-y</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">install</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">numactl</span></span>
<span class="line"><span style="color:#ABB2BF;">yum </span><span style="color:#D19A66;">-y</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">install</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">libncurses</span><span style="color:#E5C07B;">*</span></span>
<span class="line"><span style="color:#ABB2BF;">yum </span><span style="color:#D19A66;">-y</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">install</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">libaio</span></span>
<span class="line"></span></code></pre></div><h2 id="下载并上传安装包" tabindex="-1">下载并上传安装包 <a class="header-anchor" href="#下载并上传安装包" aria-hidden="true">#</a></h2><p>可前往 <a href="https://downloads.mysql.com/archives/community" target="_blank" rel="noreferrer">官网</a> 下载 MySQL Linux 安装包然后上传到服务器。</p><p><img src="`+h+`" alt="202210222130166"></p><p>也可以直接在服务器内下载。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://cdn.mysql.com/archives/mysql-</span><span style="color:#F78C6C;">5.7</span><span style="color:#C3E88D;">/mysql-5.7.39-linux-glibc2.</span><span style="color:#F78C6C;">12</span><span style="color:#C3E88D;">-x86_64.tar.gz</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">wget </span><span style="color:#98C379;">https://cdn.mysql.com/archives/mysql-</span><span style="color:#D19A66;">5.7</span><span style="color:#98C379;">/mysql-5.7.39-linux-glibc2.</span><span style="color:#D19A66;">12</span><span style="color:#98C379;">-x86_64.tar.gz</span></span>
<span class="line"></span></code></pre></div><h2 id="解压安装包" tabindex="-1">解压安装包 <a class="header-anchor" href="#解压安装包" aria-hidden="true">#</a></h2><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>除去一些固定的东西，一定要记得根据你实际的情况调整好目录位置或命名。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 解压安装包到指定目录（如指定目录不存在则需要先提前用 mkdir 创建）</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 下方 /opt/disk 是服务器的一块数据盘挂载目录</span></span>
<span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-zxvf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-5.7.39-linux-glibc2.</span><span style="color:#F78C6C;">12</span><span style="color:#C3E88D;">-x86_64.tar.gz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重命名目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk</span></span>
<span class="line"><span style="color:#FFCB6B;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-5.7.39-linux-glibc2.</span><span style="color:#F78C6C;">12</span><span style="color:#C3E88D;">-x86_64</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 创建 MySQL 数据存储目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">data</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 解压安装包到指定目录（如指定目录不存在则需要先提前用 mkdir 创建）</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 下方 /opt/disk 是服务器的一块数据盘挂载目录</span></span>
<span class="line"><span style="color:#ABB2BF;">tar </span><span style="color:#D19A66;">-zxvf</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql-5.7.39-linux-glibc2.</span><span style="color:#D19A66;">12</span><span style="color:#98C379;">-x86_64.tar.gz</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-C</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/opt/disk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 重命名目录</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/opt/disk</span></span>
<span class="line"><span style="color:#ABB2BF;">mv </span><span style="color:#98C379;">mysql-5.7.39-linux-glibc2.</span><span style="color:#D19A66;">12</span><span style="color:#98C379;">-x86_64</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 创建 MySQL 数据存储目录</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql</span></span>
<span class="line"><span style="color:#ABB2BF;">mkdir </span><span style="color:#98C379;">data</span></span>
<span class="line"></span></code></pre></div><h2 id="创建mysql用户组和mysql用户" tabindex="-1">创建mysql用户组和mysql用户 <a class="header-anchor" href="#创建mysql用户组和mysql用户" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 创建 mysql 用户组</span></span>
<span class="line"><span style="color:#FFCB6B;">groupadd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 创建 mysql 用户</span></span>
<span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 将 MySQL 安装目录授权给 mysql 用户组的 mysql 用户</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-R</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 创建 mysql 用户组</span></span>
<span class="line"><span style="color:#ABB2BF;">groupadd </span><span style="color:#98C379;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 创建 mysql 用户</span></span>
<span class="line"><span style="color:#ABB2BF;">useradd </span><span style="color:#D19A66;">-r</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-g</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 将 MySQL 安装目录授权给 mysql 用户组的 mysql 用户</span></span>
<span class="line"><span style="color:#ABB2BF;">chown </span><span style="color:#D19A66;">-R</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql:mysql</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">./</span></span>
<span class="line"></span></code></pre></div><h2 id="创建配置文件" tabindex="-1">创建配置文件 <a class="header-anchor" href="#创建配置文件" aria-hidden="true">#</a></h2><p>创建 my_default.cnf 配置文件。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk/mysql/support-files/my_default.cnf</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">vim </span><span style="color:#98C379;">/opt/disk/mysql/support-files/my_default.cnf</span></span>
<span class="line"></span></code></pre></div><p>将下方内容插入到配置文件中，保存并退出编辑。</p><div class="tip custom-block"><p class="custom-block-title">笔者说</p><p>下方的配置中，指定了 MySQL 安装目录、MySQL 数据存储目录、MySQL 服务占用端口、MySQL 默认字符集、MySQL 日志文件位置、MySQL 进程文件位置等。</p><p><strong>一定记得根据你实际的情况调整好。</strong></p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">mysqld</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">sql_mode</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">basedir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk/mysql</span></span>
<span class="line"><span style="color:#FFCB6B;">datadir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk/mysql/data</span></span>
<span class="line"><span style="color:#FFCB6B;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3306</span></span>
<span class="line"><span style="color:#FFCB6B;">socket</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/tmp/mysql.sock</span></span>
<span class="line"><span style="color:#FFCB6B;">character-</span><span style="color:#82AAFF;">set</span><span style="color:#FFCB6B;">-server=utf8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">log-error</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk/mysql/data/mysqld.log</span></span>
<span class="line"><span style="color:#FFCB6B;">pid-file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk/mysql/data/mysqld.pid</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[mysqld]</span></span>
<span class="line"><span style="color:#E06C75;">sql_mode</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">basedir </span><span style="color:#98C379;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/opt/disk/mysql</span></span>
<span class="line"><span style="color:#ABB2BF;">datadir </span><span style="color:#98C379;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/opt/disk/mysql/data</span></span>
<span class="line"><span style="color:#ABB2BF;">port </span><span style="color:#98C379;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">3306</span></span>
<span class="line"><span style="color:#ABB2BF;">socket </span><span style="color:#98C379;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/tmp/mysql.sock</span></span>
<span class="line"><span style="color:#ABB2BF;">character-</span><span style="color:#56B6C2;">set</span><span style="color:#ABB2BF;">-server=utf8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">log-error </span><span style="color:#98C379;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/opt/disk/mysql/data/mysqld.log</span></span>
<span class="line"><span style="color:#ABB2BF;">pid-file </span><span style="color:#98C379;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/opt/disk/mysql/data/mysqld.pid</span></span>
<span class="line"></span></code></pre></div><p>拷贝一份配置文件到 /etc 目录下，命名为 <code>my.cnf</code>。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">support-files/my_default.cnf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/my.cnf</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">cp </span><span style="color:#98C379;">support-files/my_default.cnf</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/etc/my.cnf</span></span>
<span class="line"></span></code></pre></div><h2 id="安装并启动mysql服务" tabindex="-1">安装并启动MySQL服务 <a class="header-anchor" href="#安装并启动mysql服务" aria-hidden="true">#</a></h2><p>使用 <code>mysqld</code> 命令来安装 MySQL 服务，并指定好用户名、MySQL 安装目录、MySQL 数据存储目录。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">bin/mysqld</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--initialize</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--user=mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--basedir=/opt/disk/mysql/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--datadir=/opt/disk/mysql/data/</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">bin/mysqld </span><span style="color:#D19A66;">--initialize</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--user=mysql</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--basedir=/opt/disk/mysql/</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--datadir=/opt/disk/mysql/data/</span></span>
<span class="line"></span></code></pre></div><p>拷贝一份 MySQL 服务脚本到 <code>/etc/init.d</code> 目录下，命名为 <code>mysql</code>。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">support-files/mysql.server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/init.d/mysql</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">cp </span><span style="color:#98C379;">support-files/mysql.server</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/etc/init.d/mysql</span></span>
<span class="line"></span></code></pre></div><p>启动 MySQL 服务。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">start</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql</span></span>
<span class="line"></span></code></pre></div><p>配置 MySQL 开机自启动。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">systemctl </span><span style="color:#98C379;">enable</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mysql</span></span>
<span class="line"></span></code></pre></div><p>到此，MySQL 服务就安装完成了。但别着急，还需要做些配置才能真正用起来。</p><h2 id="设置环境变量" tabindex="-1">设置环境变量 <a class="header-anchor" href="#设置环境变量" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">笔者说</p><p>配置好环境变量，我们才能方便的在任何目录下使用 MySQL 的命令。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 1、打开 profile 文件</span></span>
<span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2、在其中插入环境变量配置</span></span>
<span class="line"><span style="color:#A6ACCD;">MYSQL_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/opt/disk/mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">$MYSQL_HOME</span><span style="color:#C3E88D;">/bin:</span><span style="color:#A6ACCD;">$PATH</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> MYSQL_HOME PATH</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3、重新加载 profile 文件，使最新配置生效</span></span>
<span class="line"><span style="color:#82AAFF;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/profile</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 1、打开 profile 文件</span></span>
<span class="line"><span style="color:#ABB2BF;">vim </span><span style="color:#98C379;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 2、在其中插入环境变量配置</span></span>
<span class="line"><span style="color:#E06C75;">MYSQL_HOME</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">/opt/disk/mysql</span></span>
<span class="line"><span style="color:#E06C75;">PATH</span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;">$MYSQL_HOME</span><span style="color:#98C379;">/bin:</span><span style="color:#E06C75;">$PATH</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> MYSQL_HOME PATH</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 3、重新加载 profile 文件，使最新配置生效</span></span>
<span class="line"><span style="color:#56B6C2;">source</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/etc/profile</span></span>
<span class="line"></span></code></pre></div><h2 id="登录并修改密码" tabindex="-1">登录并修改密码 <a class="header-anchor" href="#登录并修改密码" aria-hidden="true">#</a></h2><p>第一次登录时，首先从日志文件中找到随机生成的密码。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/disk/mysql/data/mysqld.log</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">cat </span><span style="color:#98C379;">/opt/disk/mysql/data/mysqld.log</span></span>
<span class="line"></span></code></pre></div><p>在日志文件中找到类似于下方输出的位置，其中 <code>8QE2NEqhB:ks</code> 就是密码。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">[Note] A temporary password is generated for root@localhost: 8QE2NEqhB:ks</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">[Note] A temporary password is generated for root@localhost: 8QE2NEqhB:ks</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre></div><p>登录到 MySQL 服务端。</p><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>有些时候随机生成的密码包含特殊符号，例如：<code>&amp;</code>、<code>/</code>、<code>.</code>（你没看错，有时候最后有个 <code>.</code> 可千万别当作是句子结尾。</p><p>这种密码你在登录的时候，记得用 <code>&#39;</code> 单引号给它引起来。</p><p>例如：<code>mysql -uroot -p&#39;7AB5CDadE&amp;&#39;</code></p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p刚才从日志中找到的随机密码</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">mysql </span><span style="color:#D19A66;">-uroot</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-p刚才从日志中找到的随机密码</span></span>
<span class="line"></span></code></pre></div><p>修改密码。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">新密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">password</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">password</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;新密码&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre></div><h2 id="创建用户并授权" tabindex="-1">创建用户并授权 <a class="header-anchor" href="#创建用户并授权" aria-hidden="true">#</a></h2><p>这一步就要根据你的实际个人需要来操作了。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">identified</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">你的密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">grant </span><span style="color:#98C379;">all</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">*</span><span style="color:#98C379;">.</span><span style="color:#E5C07B;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">root@&#39;%&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">identified</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">by</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;你的密码&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre></div>`,50);function g(s,k,E,b,q,v){const o=c,e=B("ClientOnly");return p(),r("div",null,[F,y(e,null,{default:i(()=>{var a,n;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=s.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(p(),A(o,{key:0,article:s.$frontmatter},null,8,["article"])):D("",!0)]}),_:1}),u])}const S=t(m,[["render",g]]);export{_ as __pageData,S as default};
